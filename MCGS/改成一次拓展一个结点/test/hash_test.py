import random
import ctypes

EMPTY = -1
WHITE = 0
BLACK = 1

zobrist_table = [[[14678254559505960364, 8642703776688205911, 637843794743526971], [17880532736411086601, 4562507522935261535, 16685075361562458634], [9233672674462127120, 14047910806267876273, 8752776011751454661], [13043105780426069893, 614120245203719984, 4627208398750930730], [7345935192275374513, 5880166450100435267, 7173653182966537143], [17405253397135127309, 16890136318287457515, 17725840698349480356], [9022463401706945097, 6408071534158434696, 4225641978017084179], [12152543853176447430, 281627032192036486, 13754592180268903334], [15384803181223280868, 6947162774921610674, 17130392843761137912], [3208524763383726916, 5162109249505044407, 13557506019201431141], [13714637259084270444, 17235675271130337904, 7125121874552899126]], [[7185154976253381330, 4388669596800809882, 7944192236533245556], [3027230476043877653, 17838828924552494715, 15329485693862700714], [17950829181716018312, 2098388894189736228, 14767530184117819398], [17764361212494064933, 12014500731679517547, 12814107068837859047], [6645000395258545346, 570667081077645870, 2324242004503854069], [14445108225213959683, 1495366099428548115, 152282661982495797], [12746055275461175538, 14632337990869322585, 9887390325579785243], [8612679911607154858, 7045632704762281280, 15123274190780884965], [715732114801985691, 4334461213310716967, 17921943948631523092], [2716108593176182925, 9292258843017219430, 4276411591212278269], [13900825444183906485, 4398546614793786183, 1869889228894563994]], [[5193835445517918416, 10783411100056653894, 2653624625755905308], [14686861420354095025, 13386824698902677021, 13718642525525877802], [3825318764537475250, 9438337493317854811, 18257120533795445977], [2863868959605676280, 5528642161998966626, 7977489594283604462], [10853179178900549518, 11982640772814597849, 8004867895505096108], [12591709735328898824, 5029525916861765111, 5324512837326153105], [2669830339060063233, 5594810403436042397, 8752121106081758258], [11226458636014641965, 655400877515233894, 15489229597009272621], [6716891446162105522, 2800569696337264510, 6904261840126046688], [12840372890201963139, 11998026302891205608, 4164845076022170995], [11550729648261878487, 17261646290636951262, 6492567406730278299]], [[1411042038797335789, 32712124367394501, 10419220211559490346], [157407805692970313, 13549898567350119654, 4954187820520429781], [222970942022339247, 18123085793093896300, 1262094008689517459], [4961268188362680814, 16065094645732185921, 11217540425810663247], [4815082559558164972, 1767425813991045533, 5907318568789991366], [15271933832455583856, 1182295208445599166, 15765642216729379120], [16314025555293494901, 12627562485208633398, 14473631806747715359], [10988028835627492878, 9967972486237995968, 4416120288309230983], [18444906459129016550, 1740806557258781234, 4221218375954462331], [10327204888389431440, 6674427477982188955, 1459840457845968271], [17333668865961305567, 17079895342884856071, 13960345762663932239]], [[15658576431538539996, 15294287060566328637, 13465179486056722089], [1579896366074527747, 2287426575319705721, 3589211952604603611], [239340030832501925, 6429878840783294475, 5374717229738295593], [15833602375930663414, 2225519551443311474, 13776049114771555401], [17186707994227369705, 10306132450790717356, 13262772935480812379], [8227729158059333877, 12719508590027737347, 7507686189168875484], [1265197504409285099, 8512915744141187466, 12878802322043331201], [14388549459727360741, 6995678357350967778, 11154675040978810054], [15059310097026972721, 1145093506879936091, 1619505849986692005], [12167649759640963322, 9050471411729126986, 6851045769384049473], [8817601808488735480, 11311970561597146630, 16215429580200246540]], [[2440579594259820177, 11888246537256540365, 10010895882853307951], [284557349612849137, 13237953607156221344, 738263071865192509], [1337460715269955849, 5354947648035505094, 6180364417026112701], [567700725673088938, 14093668206636247761, 8444416626015407905], [1742327297669918913, 13752262567493539086, 17015483075055738763], [13685182698206814808, 4953791910381428519, 7609934010424547248], [9318956845539940972, 17775932738954223052, 5510595242243753298], [8065208893626698311, 17647661458384084008, 1069327984754497685], [2279290364843102161, 10249087974233612308, 6792491292722904431], [7496453687717257661, 17425415309405116395, 15843219720216819275], [7128625374627881096, 4887613553952578266, 5739151215150541588]], [[4728949108553807461, 10698527017248595391, 14598574487168644567], [14767891910800825803, 17948906023458538422, 9039562930992526546], [12116407020011621009, 16337294162111641069, 2387621045970265131], [4557517741918461465, 11314708741648956137, 2959086106568867418], [478674367011213055, 8930671616822933218, 5440345983264918278], [13837564752138886952, 2776586416150535125, 15933981488534548896], [11058301462576270233, 8924639671522041589, 13635592971858653324], [8000556223459856246, 1169267018665852717, 18351067419426691049], [489861393042273432, 2487522676832000741, 9440273258417567164], [7389463302932651913, 11988738801541267257, 9422795704480303088], [7334388681537529927, 14296603835312239803, 10693302537441326723]], [[5920516489044595043, 4090664298357533780, 8458657032678771066], [3983613384296223494, 11516175135861624092, 13969112205846621913], [12726242786597614865, 3088414753600611284, 15613661759475436796], [13017867889034400502, 12140787421175750805, 9421061856974586496], [6070258383488225498, 11127627786477514827, 15743892781445875026], [18338892010519481444, 6198422400972516838, 11335267842345688769], [7016741951600350112, 18385360090243361218, 5918315326741806597], [16565635567415659701, 8883342786974462235, 12720807524447723376], [9452725632167103016, 1363680072066688741, 10757538206913795185], [1631510838624503132, 11162687510979353713, 13337249428011696159], [7237570315612169737, 12198219608193618835, 16386303661922082432]], [[8976242977127745210, 16789543443292736474, 8852647684447162026], [13826233351831368951, 18050169785599548876, 17907551454187801768], [3919727680751159792, 17783920743835052752, 3669723861993992806], [4271647262334485049, 3886798812542647044, 14768080197730126045], [16848892898639252430, 9483120738843800193, 17649112337053974101], [7992263721113781152, 10585289404318946652, 5327299262687508648], [13550611338781481912, 11059799322657750908, 3204160832473990198], [15624563404716043082, 17053112006704295651, 3144565495544774885], [8770775926904545241, 16570995044367604764, 7720465059734392684], [364050613845395488, 16037551184836437802, 1512008929663710352], [3366392790049315418, 4060640556279028010, 14995195672373581295]], [[11792243081552240736, 17419462143782701000, 12287460717701932908], [3958343528422591588, 17810437769527783997, 5119858734803760287], [9139574268846615193, 18257731929289175843, 6315031588451892748], [17512489593270110697, 6612090864087335792, 7889447014789943834], [8474302449741237414, 8552483351560717697, 17905168222073628332], [12405302417758904866, 17711486888607657395, 8522643825692117431], [12752788259669512881, 7772514593705131432, 14982915375219108608], [461422655712422595, 7949937353663623900, 6104703638926802683], [1397923209218975335, 14454025919912125723, 12167167569071230882], [10092268645118729796, 13339605635059842932, 14109834308009623443], [114762486825980421, 6033454768182642505, 10214597135621225544]], [[15203963281481619651, 4951334817030992208, 17096127960117962153], [10349822092687708853, 15856814591285164684, 16540975819927739260], [2431868524089382163, 438977280879188443, 1711131298077275714], [3845797138079849973, 16047552324324618872, 9604807631756043250], [9671457525085435668, 17914003801150012487, 12426754324724244486], [18277107251978979870, 11647032649408975018, 15436658560514473685], [12918328045060150701, 14568061563244377789, 17977706561650130742], [13822835058225274751, 2230545042136810377, 6958383254280539065], [14568781593640466266, 10976087229066241584, 17810140204220824108], [17460077121197336181, 5231917171181376793, 13566992562563490838], [16405540095902929253, 3669796321451264193, 10529796212769977250]]]


def initialize_zobrist_table(board_size):
    # 三种状态：0-空，1-黑子，2-白子
    return [[[random.getrandbits(64) for _ in range(3)] for _ in range(board_size)] for _ in range(board_size)]

def compute_zobrist_hash(board):
    empty_num = 0
    hash_value = 0
    for i in range(len(board)):
        for j in range(len(board[i])):
            if board[i][j] == EMPTY:
                state = 0
                empty_num += 1
            elif board[i][j] == WHITE:
                state = 2
            else:
                state = 1
            # state = board[i][j]  # 0 for empty, 1 for black, 2 for white
            hash_value ^= zobrist_table[i][j][state]
    return ctypes.c_int64(hash_value).value, 121-empty_num  # Ensure the hash is in int64 range


matrix = [
    [-1, -1, -1, -1, -1, -1, -1, -1, -1, 0, -1],
    [-1, -1, -1, -1, -1, -1, -1, 1, 1, -1, -1],
    [-1, -1, -1, -1, 0, -1, -1, 0, 1, -1, -1],
    [-1, -1, -1, 1, 0, 1, -1, 1, -1, -1, -1],
    [-1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1],
    [-1, -1, -1, -1, -1, -1, 1, -1, -1, -1, -1],
    [-1, -1, -1, -1, -1, -1, -1, 1, -1, -1, -1],
    [-1, -1, -1, 1, -1, 0, -1, -1, 1, -1, -1],
    [-1, -1, -1, 0, -1, -1, 0, -1, -1, -1, -1],
    [-1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1],
    [-1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1]
]
hash_value = compute_zobrist_hash(matrix)
print(hash_value)